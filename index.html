<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kingshot - SoT Alliance Announcement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary: #1a355e;
      --accent: #326ba8;
      --bg: #f7f8fa;
      --panel: #fff;
      --text-main: #222;
      --text-secondary: #666;
      --border: #e0e7ef;
      --shadow: rgba(0,0,0,0.08);
      --highlight: #f2f6fc;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      margin: 0;
      padding: 0;
      color: var(--text-main);
    }
    .container {
      max-width: 900px; /* wider */
      margin: 40px auto;
      background: var(--panel);
      border-radius: 10px;
      box-shadow: 0 2px 10px var(--shadow);
      padding: 32px 24px 24px 24px;
      border: 1px solid var(--border);
    }
    h1 {
      margin-top: 0;
      color: var(--primary);
      font-size: 2rem;
      letter-spacing: 1px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 12px;
      font-weight: 600;
    }
    ul.announcement-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    ul.announcement-list li {
      border-left: 4px solid var(--accent);
      background: var(--highlight);
      margin-bottom: 20px;
      padding: 16px 16px 16px 20px;
      border-radius: 6px;
      box-shadow: 0 1px 4px var(--shadow);
      position: relative;
      transition: box-shadow 0.2s;
      display: flex;
      align-items: flex-start;
    }
    ul.announcement-list li:hover {
      box-shadow: 0 4px 16px var(--shadow);
    }
    .date {
      font-weight: bold;
      color: var(--text-secondary);
      font-size: 0.98rem;
      margin-bottom: 6px;
      display: block;
      min-width: 110px;
      margin-right: 16px;
      flex-shrink: 0;
    }
    .announcement-title {
      font-size: 1.08rem;
      color: var(--primary);
      margin-bottom: 4px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: underline;
      transition: color 0.2s;
      display: flex;
      align-items: center;
    }
    .announcement-title:hover {
      color: var(--accent);
    }
    .announcement-icon {
      width: 26px;
      height: 26px;
      margin-right: 8px;
      vertical-align: middle;
      flex-shrink: 0;
      display: inline-block;
    }
    .announcement-content {
      flex: 1;
      min-width: 0;
    }
    .announcement-desc {
      font-size: 1rem;
      color: var(--text-main);
    }
    /* Modal Styles */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.18);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    .modal {
      background: var(--panel);
      padding: 24px 20px 18px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 32px var(--shadow);
      width: 80vw;
      max-width: 80vw;
      height: 80vh;
      max-height: 80vh;
      min-width: 260px;
      overflow-y: auto;
      margin: 0 16px;
      position: relative;
      animation: fadeIn 0.18s;
      display: flex;
      flex-direction: column;
      border: 1px solid var(--border);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .modal-close {
      position: absolute;
      top: 10px; right: 14px;
      color: var(--text-secondary);
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.2s;
    }
    .modal-close:hover {
      color: var(--accent);
    }
    .modal-title {
      font-size: 1.1rem;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 10px;
    }
    .modal-desc {
      font-size: 1rem;
      color: var(--text-main);
      margin-bottom: 10px;
    }
    .modal-textarea-label {
      font-size: 0.98rem;
      color: var(--text-secondary);
      margin-bottom: 4px;
      display: block;
      font-weight: 500;
    }
    .modal-more-box {
      width: 100%;
      min-height: 80px;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px;
      font-size: 1rem;
      background: var(--highlight);
      color: var(--text-main);
      margin-bottom: 8px;
      word-break: break-word;
      box-sizing: border-box;
    }
    @media (max-width: 900px) {
      .container {
        max-width: 98vw;
      }
    }
    @media (max-width: 600px) {
      .modal {
        width: 96vw;
        max-width: 96vw;
        height: 96vh;
        max-height: 96vh;
        padding: 16px 6px 12px 6px;
      }
      .container {
        padding: 8px 2px 2px 2px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kingshot - SoT Alliance Announcement</h1>
    <ul class="announcement-list" id="announcementList">
      <!-- Announcements will be loaded here -->
    </ul>
  </div>
  <!-- Modal Popup -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modalWindow">
      <button class="modal-close" id="modalClose" aria-label="Close modal">&times;</button>
      <div class="modal-title" id="modalTitle"></div>
      <div class="modal-desc" id="modalDesc"></div>
      <label for="modalMoreBox" class="modal-textarea-label">More Information:</label>
      <div id="modalMoreBox" class="modal-more-box">No more details...</div>
    </div>
  </div>
  <script>
    // SVG for Kingshot icon (sample trophy, you can replace with your actual game icon SVG or image URL)
    const kingshotIconSVG = `
      <svg class="announcement-icon" viewBox="0 0 32 32" fill="none">
        <ellipse cx="16" cy="28" rx="7" ry="2.5" fill="#FFD700"/>
        <path d="M0 0 C14.52 0 29.04 0 44 0 C45.09658936 3.28976808 44.79953138 4.71303767 44 8 C43.34 8 42.68 8 42 8 C42.47228581 11.81338579 42.95397506 15.62552432 43.4375 19.4375 C43.57220703 20.52611328 43.70691406 21.61472656 43.84570312 22.73632812 C43.97783203 23.77080078 44.10996094 24.80527344 44.24609375 25.87109375 C44.36654053 26.82943115 44.4869873 27.78776855 44.61108398 28.77514648 C44.77440917 30.9660042 44.77440917 30.9660042 46 32 C48.32817964 32.36760731 50.6618385 32.70241581 53 33 C54.73734147 36.80043446 55 38.59714577 55 43 C33.55 43 12.1 43 -10 43 C-9.67 39.7 -9.34 36.4 -9 33 C-6.36 32.67 -3.72 32.34 -1 32 C0.67753327 26.69251028 1.54705027 21.59092076 2.125 16.0625 C2.21136719 15.28326172 2.29773437 14.50402344 2.38671875 13.70117188 C2.59651323 11.8013663 2.79901994 9.90075826 3 8 C2.01 7.67 1.02 7.34 0 7 C0 4.69 0 2.38 0 0 Z" stroke="#326ba8" stroke-width="2" fill="#f7f8fa"/>
        <rect x="12" y="9" width="8" height="10" rx="3" fill="#FFD700" stroke="#326ba8" stroke-width="2"/>
        <path d="M14 19v3h4v-3" stroke="#326ba8" stroke-width="2"/>
        <path d="M5 9c0 4 2 7 5 7" stroke="#326ba8" stroke-width="2"/>
        <path d="M27 9c0 4-2 7-5 7" stroke="#326ba8" stroke-width="2"/>
      </svg>
    `;

    // Load announcements from announcements.txt
    fetch('announcements.txt')
      .then(response => response.text())
      .then(text => {
        const lines = text.trim().split('\n');
        const announcementList = document.getElementById('announcementList');
        lines.forEach(line => {
          // Format: date|title|desc|more
          const [date, title, desc, more] = line.split('|');
          const li = document.createElement('li');
          li.innerHTML = `
            <span class="date">${date}</span>
            <div class="announcement-content">
              <div class="announcement-title" data-title="${title}" data-desc="${desc}" data-more="${encodeURIComponent(more)}">
                ${kingshotIconSVG}
                <span>${title}</span>
              </div>
              <div class="announcement-desc">${desc}</div>
            </div>
          `;
          announcementList.appendChild(li);
        });

        // Add modal popup events after announcements are loaded
        const titles = document.querySelectorAll('.announcement-title');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalClose = document.getElementById('modalClose');
        const modalMoreBox = document.getElementById('modalMoreBox');

        titles.forEach(titleElem => {
          titleElem.addEventListener('click', function() {
            modalTitle.textContent = this.getAttribute('data-title');
            modalDesc.textContent = this.getAttribute('data-desc');
            // Render HTML tags in more info
            const moreInfo = decodeURIComponent(this.getAttribute('data-more') || "");
            modalMoreBox.innerHTML = moreInfo && moreInfo.trim() ? moreInfo : "No more details...";
            modalOverlay.style.display = 'flex';
          });
        });

        modalClose.addEventListener('click', function() {
          modalOverlay.style.display = 'none';
        });

        modalOverlay.addEventListener('click', function(e) {
          if (e.target === modalOverlay) {
            modalOverlay.style.display = 'none';
          }
        });

        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            modalOverlay.style.display = 'none';
          }
        });
      });
  </script>
</body>
</html>
